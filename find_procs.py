from sys import platform
from sys import exit
import multiprocessing as mp
import subprocess
import psutil


def get_proc_handlers():
    if "win" in platform:
        print('Ok')
    else:
        print("There might be problems. Terminating the process")
        exit()

    target_procs = []
    proc_list = psutil.pids()
    for proc in proc_list:
        p = psutil.Process(proc)
        if 'avp' in p.name():
            target_procs.append(p)
            print(p.name(), " - ", proc, ', cwd is - ', p.cwd())

    return target_procs

def func(q):
    print(q)
    hndl = subprocess.Popen(q)

if __name__ == '__main__':
    #get_proc_handlers()
    kasper = mp.Process(target=func, args=('AVP.com HELP SCAN'.split(' '),))
    eset = mp.Process(target=func, args=('ipconfig',))
    ping = mp.Process(target=func, args=('ping', ))
    kasper.start()
    #kasper.join()
    eset.start()
    #eset.join()
    ping.start()
    #ping.join()


